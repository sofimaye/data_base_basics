<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Назва проєкту</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/edu_db_labs/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <meta name="description" content="Лабораторні роботи з дисципліни &quot;Організація баз даних&quot;">
    
    <link rel="preload" href="/edu_db_labs/assets/css/0.styles.3af1e61d.css" as="style"><link rel="preload" href="/edu_db_labs/assets/js/app.89fcf87b.js" as="script"><link rel="preload" href="/edu_db_labs/assets/js/2.4534aae0.js" as="script"><link rel="preload" href="/edu_db_labs/assets/js/24.69d0b619.js" as="script"><link rel="prefetch" href="/edu_db_labs/assets/js/10.c6e7375e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/11.77ffe049.js"><link rel="prefetch" href="/edu_db_labs/assets/js/12.1bed0d43.js"><link rel="prefetch" href="/edu_db_labs/assets/js/13.aa20a373.js"><link rel="prefetch" href="/edu_db_labs/assets/js/14.769c156a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/15.b32af12d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/16.4d29a29a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/17.84d13c90.js"><link rel="prefetch" href="/edu_db_labs/assets/js/18.762de7ed.js"><link rel="prefetch" href="/edu_db_labs/assets/js/19.15cc71e1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/20.be330620.js"><link rel="prefetch" href="/edu_db_labs/assets/js/21.1e139cda.js"><link rel="prefetch" href="/edu_db_labs/assets/js/22.1fcdbfe3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/23.88169ae7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/25.f71873d3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/26.fd1d4d15.js"><link rel="prefetch" href="/edu_db_labs/assets/js/27.78c6cc59.js"><link rel="prefetch" href="/edu_db_labs/assets/js/28.63513037.js"><link rel="prefetch" href="/edu_db_labs/assets/js/29.6a32712f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/3.630a2dd6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/30.02ae5e91.js"><link rel="prefetch" href="/edu_db_labs/assets/js/31.4ebcb43f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/32.313292fe.js"><link rel="prefetch" href="/edu_db_labs/assets/js/4.68feb87f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/5.257f9e59.js"><link rel="prefetch" href="/edu_db_labs/assets/js/6.612a98a1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/7.b06b704d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/8.37bcba1a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/9.df4857e8.js">
    <link rel="stylesheet" href="/edu_db_labs/assets/css/0.styles.3af1e61d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/edu_db_labs/" class="home-link router-link-active"><!----> <span class="site-name">Назва проєкту</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/edu_db_labs/" class="nav-link">
  Початок
</a></div> <a href="https://github.com/edu-db/edu_db_labs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/edu_db_labs/" class="nav-link">
  Початок
</a></div> <a href="https://github.com/edu-db/edu_db_labs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/edu_db_labs/intro/" class="sidebar-link">Вступ</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/edu_db_labs/requirements/" class="sidebar-heading clickable"><span>Розроблення загальних вимог до системи</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/edu_db_labs/use%20cases/" class="sidebar-link">Розроблення вимог до функціональности системи</a></li><li><a href="/edu_db_labs/design/" class="sidebar-link">Проектування інформаційного забезпечення</a></li><li><a href="/edu_db_labs/software/" class="sidebar-link">Реалізація інформаційного та програмного забезпечення</a></li><li><a href="/edu_db_labs/test/" class="sidebar-link">Тестування працездатності системи</a></li><li><a href="/edu_db_labs/conclusion/" class="sidebar-link">Висновки</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ</p> <p>Національний Технічний Університет України</p> <p>«Київський Політехнічний Інститут»</p> <p>Факультет інформатики та обчислювальної техніки</p> <p>Кафедра обчислювальної техніки</p> <p><strong>Лабораторна робота №6</strong></p> <p>з дисципліни «Організація баз даних»</p> <p><strong>на тему: «Реалізація об’єктно-реляційного відображення»</strong></p> <p><strong>Виконала:</strong></p> <p>студентка 2-го курсу ФІОТ</p> <p>групи ІО-з01</p> <p>Манзенко С.С.</p> <p>Залікова книжка №0111</p> <p><strong>Перевірив:</strong></p> <p>Доцент</p> <p>Кандидат технічних наук</p> <p>Болдак О.А</p> <p><strong>Київ – 2022</strong></p> <p><strong>МЕТА:</strong> Отримання навичок зі створення DAO-інфраструктури для доступу до MySQL баз даних.</p> <p><strong>ДОВІДКА</strong></p> <p><em><strong>DAO</strong></em> - об'єкт що надає абстрактний інтерфейс до деяких видів баз даних чи механізмів персистентності реалізуючи певні операції без розкриття деталей бази даних. Він надає відображення від програмних викликів до рівня персистентності. Така ізоляція розділює запити до даних в термінах предметної області та їх реалізацію засобами СКБД.</p> <p>Персистентність - здатність стану існувати довше, ніж процес, що створив його. Без цієї можливості, стан може існувати лише в оперативній пам'яті і втрачається, коли оперативна пам'ять вимикається, наприклад, при вимкненні комп'ютера.</p> <p><img src="lab6.001.png" alt="uml"></p> <p><em><strong>Active Record</strong></em> - це шаблон проектування, що використовується при реалізації доступу до реляційних баз даних. Вперше згадується Мартіном Фаулером в книжці Patterns of Enterprise Application Architecture. Цей шаблон є підвидом DAO, але навідміну від нього, він надає CRUD API кожному окремому об'єкту, який репрезентує окремий запис в таблиці БД.</p> <p><strong>Завдання</strong></p> <ol><li>Ознайомитись з призначенням шаблону Data Access Object</li> <li>Створити базу даних у MySQL</li> <li>Створити bean-класи по одному для кожної таблиці, які складаються з опису одного рядка таблиці.</li> <li>Розробити DAO-інфраструктуру для роботи з базою даних.</li> <li>Розробити програму для тестування можливостей DAO, яка створює деякі об’єкти в кожній таблиці та шукає існуючи їх по деяким ознакам.</li> <li>Запустити програму та продивитись результати її роботи у MySQL.</li></ol> <p>ВИКОНАННЯ ЗАВДАНЬ</p> <p>Створена база у MySQL</p> <p>create database internetshop1;</p> <p>-- userAccount</p> <p>create table internetshop1.userAccount(</p> <p>userId int primary key,</p> <p>name varchar(50),</p> <p>phone varchar(50),</p> <p>email varchar(50)</p> <p>);</p> <p>-- one order</p> <p>create table internetshop1.orders(</p> <p>orderId int primary key,</p> <p>userAccountId int,</p> <p>foreign key (userAccountId) references userAccount(userId)</p> <p>);</p> <p>-- a product</p> <p>create table internetshop1.products(</p> <p>productId int primary key,</p> <p>categoryId int,</p> <p>brand varchar(50),</p> <p>size varchar(50),</p> <p>shortDescription varchar(255),</p> <p>discount varchar(50),</p> <p>previousPrice varchar(50),</p> <p>actualPrice varchar(50)</p> <p>);</p> <p>create table internetshop1.orderItems(</p> <p>orderItemsId int primary key,</p> <p>productId int,</p> <p>size varchar(50),</p> <p>price varchar(50),</p> <p>orderId int,</p> <p>foreign key (productId) references products(productId),</p> <p>foreign key (orderId) references orders(orderId)</p> <p>);</p> <p>-- change a datatype of the table`s column</p> <p>USE internetshop1;</p> <p>ALTER TABLE products MODIFY previousPrice INTEGER;</p> <p>ALTER TABLE products MODIFY actualPrice INTEGER;</p> <p>ALTER TABLE orderItems MODIFY price INTEGER;</p> <p>-- how to delete the table</p> <p>DROP table sys.Categories;</p> <p>DROP table sys.userAccount;</p> <p>DROP table internetshop1.userAccount;</p> <p>DROP table internetshop1.orders;</p> <p>DROP table internetshop1.Product;</p> <p>-- to insert multiple values into the table</p> <p>INSERT INTO internetshop1.userAccount(userId, name, phone, email)</p> <p>values(1, 'Sofi', '5554477', 'sofi.mann99@gmail.com'),</p> <p>(2, 'Mark', '88999777', 'mark@gmail.com'),</p> <p>(3, 'Adrew', '8855666', 'andrew@gmail.com');</p> <p>INSERT INTO internetshop1.orders(orderId, userAccountId)</p> <p>values (1, 1), (2, 2), (3,3);</p> <p>INSERT INTO internetshop1.products(productId, categoryId, brand, size, shortDescription,</p> <p>discount, previousPrice, actualPrice)</p> <p>values(1, 4, 'gucci', 'small','saffiano marmount leather light-pink bag', '-50%', 1000, 2000),</p> <p>(2, 5,'faithfull', 'xs', 'short black linen dress', '-50%', 1000, 500),</p> <p>(3, 4, 'gucci', 'large', 'brown leather bag', '-50%', 2000, 1000),</p> <p>(4, 5, 'selfportrait', 's', 'short dress', '-50%', 600, 300),</p> <p>(5, 5, 'parosh', 'xs', 'short dress', '-50%', 600, 300);</p> <p>-- to update data in the table column</p> <p>SELECT *</p> <p>FROM products</p> <p>WHERE productId=1;</p> <p>UPDATE products</p> <p>SET previousPrice = 2000, actualPrice = 1000</p> <p>WHERE productId=1;</p> <p>-- orders</p> <p>INSERT INTO internetshop1.orderItems(orderItemsId, productId, size, price, orderId)</p> <p>values(1, 1, 'small', 1000, 1),</p> <p>(2, 2, 'xs', 500, 2),</p> <p>(3, 3, 'large', 1000, 3);</p> <p>-- to show orders of every user in database (if every user made only one order)</p> <p>use internetshop1;</p> <p>SELECT *</p> <p>FROM orders o</p> <p>JOIN userAccount ua</p> <p>ON o.userAccountId = ua.userId</p> <p>JOIN orderItems oi</p> <p>ON oi.orderId = o.orderId</p> <p>JOIN products p</p> <p>ON p.productId = oi.productId;</p> <p>-- user made two or more orders</p> <p>INSERT INTO internetshop1.orderItems(orderItemsId, productId, size, price, orderId)</p> <p>values(4, 4, 's', 300, 3),</p> <p>(5, 5, 'xs', 300, 3),</p> <p>(6, 5, 'xs', 300, 3);</p> <p>use internetshop1;</p> <p>SELECT</p> <p>p.shortDescription,</p> <p>p.discount,</p> <p>p.previousPrice,</p> <p>ua.name,</p> <p>o.orderId,</p> <p>oi.size,</p> <p>oi.price</p> <p>FROM products p</p> <p>JOIN orderItems oi</p> <p>ON p.productId = oi.productId</p> <p>JOIN orders o</p> <p>ON o.orderId = oi.orderId</p> <p>JOIN userAccount ua</p> <p>ON o.userAccountId = ua.userId;</p> <p><strong>РЕЗУЛЬТАТ У ВИГЛЯДІ ТОВАРІВ ПРЕДСТАВЛЕНИХ НА ДАНИЙ МОМЕНТ У БАЗІ ДАННИХ</strong></p> <p><img src="lab6.002.jpeg" alt=""></p> <p><strong>DAO у цьому випадку грає роль сервер Node.js</strong></p> <p><strong>Запит у базу даних код продемонстрований нижче</strong></p> <p>// rewriting the code to support connection pooling</p> <p>const express = require(&quot;express&quot;);</p> <p>const app = express();</p> <p>const mysql = require('mysql');</p> <p>const pool = mysql.createPool({</p> <p><code></code>host     : 'localhost',</p> <p><code></code>user     : 'sofi',</p> <p><code></code>password : 'Password123#@!',</p> <p><code></code>database : 'internetshop1'</p> <p>});</p> <p>app.get(&quot;/&quot;,(req,res) =&gt; {</p> <p><code></code>pool.getConnection((err, connection) =&gt; {</p> <p><code></code>if(err) throw err;</p> <p><code></code>console.log('connected as id ' + connection.threadId);</p> <p><code></code>connection.query('SELECT * from internetshop1.products LIMIT 1', (err, rows) =&gt; {</p> <p><code></code>connection.release(); // return the connection to pool</p> <p><code></code>if(err) throw err;</p> <p><code></code>console.log('The data from products table are: \n', rows);</p> <p><code></code>res.send(rows)</p> <p><code></code>});</p> <p><code></code>});</p> <p>});</p> <p>app.get(&quot;/products/:id&quot;, (req, res) =&gt; {</p> <p><code></code>pool.getConnection((err, connection) =&gt; {</p> <p><code></code>if(err) throw err;</p> <p><code></code>connection.query(SELECT * from internetshop1.products WHERE productId = ${req.params.id}, (err, rows) =&gt; {</p> <p><code></code>connection.release(); // return the connection to pool</p> <p><code></code>if(err) throw err;</p> <p><code></code>res.send(rows[0])</p> <p><code></code>});</p> <p><code></code>});</p> <p>})</p> <p>app.get(&quot;/products&quot;, (req, res) =&gt; {</p> <p><code></code>pool.getConnection((err, connection) =&gt; {</p> <p><code></code>if(err) throw err;</p> <p><code></code>connection.query(SELECT * from internetshop1.products, (err, rows) =&gt; {</p> <p><code></code>connection.release(); // return the connection to pool</p> <p><code></code>if(err) throw err;</p> <p><code></code>res.send(rows)</p> <p><code></code>});</p> <p><code></code>});</p> <p>})</p> <p>app.listen(3000, () =&gt; {</p> <p><code></code>console.log('Server is running at port 3000');</p> <p>});</p> <p><img src="lab6.003.jpeg" alt=""></p> <p><strong>Результат у браузері</strong></p> <p>Якщо треба відобразити один товар</p> <p><img src="lab6.004.jpeg" alt=""></p> <p>Якщо потрібно багато товарів</p> <p><img src="lab6.005.jpeg" alt=""></p> <p><strong>ВИСНОВКИ</strong></p> <p>Отримала навички зі створення DAO-інфраструктури для доступу до MySQL баз даних.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Останнє оновлення:</span> <span class="time">4/28/2022, 4:06:03 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/edu_db_labs/assets/js/app.89fcf87b.js" defer></script><script src="/edu_db_labs/assets/js/2.4534aae0.js" defer></script><script src="/edu_db_labs/assets/js/24.69d0b619.js" defer></script>
  </body>
</html>
